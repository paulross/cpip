<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <link href="cpip.css" rel="stylesheet" type="text/css"/>
    <title>File: /Users/paulross/dev/linux-2.6.37/arch/x86/include/asm/cpufeature.h</title>
  </head>
  <body>
    <h1>File: /Users/paulross/dev/linux-2.6.37/arch/x86/include/asm/cpufeature.h</h1>
    <pre><a name="1"><span class="line">       1: </span></a><span class="k">/*
<a name="2"><span class="line">       2: </span></a> * Defines x86 CPU feature bits
<a name="3"><span class="line">       3: </span></a> */</span>
<a name="4"><span class="line">       4: </span></a><span class="f">#</span><span class="n">ifndef</span> <a href="cpu.c_macros.html#_ASM_X86_CPUFEATURE_H_0"><span class="b">_ASM_X86_CPUFEATURE_H</span></a>
<a name="5"><span class="line">       5: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#_ASM_X86_CPUFEATURE_H_0"><span class="b">_ASM_X86_CPUFEATURE_H</span></a>
<a name="6"><span class="line">       6: </span></a>
<a name="7"><span class="line">       7: </span></a><span class="f">#</span><span class="n">include</span> <span class="f">&lt;</span><span class="m">asm</span><span class="f">/</span><span class="b">required</span><span class="f">-</span><span class="b">features</span><span class="f">.</span><span class="b">h</span><span class="f">&gt;</span>
<a name="8"><span class="line">       8: </span></a>
<a name="9"><span class="line">       9: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#NCAPINTS_0"><span class="b">NCAPINTS</span></a>    <span class="c">10</span>    <span class="k">/* N 32-bit words worth of info */</span>
<a name="10"><span class="line">      10: </span></a>
<a name="11"><span class="line">      11: </span></a><span class="k">/*
<a name="12"><span class="line">      12: </span></a> * Note: If the comment begins with a quoted string, that string is used
<a name="13"><span class="line">      13: </span></a> * in /proc/cpuinfo instead of the macro name.  If the string is &quot;&quot;,
<a name="14"><span class="line">      14: </span></a> * this feature bit is not displayed in /proc/cpuinfo at all.
<a name="15"><span class="line">      15: </span></a> */</span>
<a name="16"><span class="line">      16: </span></a>
<a name="17"><span class="line">      17: </span></a><span class="k">/* Intel-defined CPU features, CPUID level 0x00000001 (edx), word 0 */</span>
<a name="18"><span class="line">      18: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FPU_0"><span class="b">X86_FEATURE_FPU</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* Onboard FPU */</span>
<a name="19"><span class="line">      19: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_VME_0"><span class="b">X86_FEATURE_VME</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* Virtual Mode Extensions */</span>
<a name="20"><span class="line">      20: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DE_0"><span class="b">X86_FEATURE_DE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* Debugging Extensions */</span>
<a name="21"><span class="line">      21: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PSE_0"><span class="b">X86_FEATURE_PSE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* Page Size Extensions */</span>
<a name="22"><span class="line">      22: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TSC_0"><span class="b">X86_FEATURE_TSC</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* Time Stamp Counter */</span>
<a name="23"><span class="line">      23: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MSR_0"><span class="b">X86_FEATURE_MSR</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* Model-Specific Registers */</span>
<a name="24"><span class="line">      24: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PAE_0"><span class="b">X86_FEATURE_PAE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* Physical Address Extensions */</span>
<a name="25"><span class="line">      25: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MCE_0"><span class="b">X86_FEATURE_MCE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* Machine Check Exception */</span>
<a name="26"><span class="line">      26: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CX8_0"><span class="b">X86_FEATURE_CX8</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* CMPXCHG8 instruction */</span>
<a name="27"><span class="line">      27: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_APIC_0"><span class="b">X86_FEATURE_APIC</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* Onboard APIC */</span>
<a name="28"><span class="line">      28: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SEP_0"><span class="b">X86_FEATURE_SEP</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* SYSENTER/SYSEXIT */</span>
<a name="29"><span class="line">      29: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MTRR_0"><span class="b">X86_FEATURE_MTRR</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* Memory Type Range Registers */</span>
<a name="30"><span class="line">      30: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PGE_0"><span class="b">X86_FEATURE_PGE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* Page Global Enable */</span>
<a name="31"><span class="line">      31: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MCA_0"><span class="b">X86_FEATURE_MCA</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">14</span><span class="f">)</span> <span class="k">/* Machine Check Architecture */</span>
<a name="32"><span class="line">      32: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CMOV_0"><span class="b">X86_FEATURE_CMOV</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">15</span><span class="f">)</span> <span class="k">/* CMOV instructions */</span>
<a name="33"><span class="line">      33: </span></a>                      <span class="k">/* (plus FCMOVcc, FCOMI with FPU) */</span>
<a name="34"><span class="line">      34: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PAT_0"><span class="b">X86_FEATURE_PAT</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">16</span><span class="f">)</span> <span class="k">/* Page Attribute Table */</span>
<a name="35"><span class="line">      35: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PSE36_0"><span class="b">X86_FEATURE_PSE36</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">17</span><span class="f">)</span> <span class="k">/* 36-bit PSEs */</span>
<a name="36"><span class="line">      36: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PN_0"><span class="b">X86_FEATURE_PN</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">18</span><span class="f">)</span> <span class="k">/* Processor serial number */</span>
<a name="37"><span class="line">      37: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CLFLSH_0"><span class="b">X86_FEATURE_CLFLSH</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">19</span><span class="f">)</span> <span class="k">/* &quot;clflush&quot; CLFLUSH instruction */</span>
<a name="38"><span class="line">      38: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DS_0"><span class="b">X86_FEATURE_DS</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">21</span><span class="f">)</span> <span class="k">/* &quot;dts&quot; Debug Store */</span>
<a name="39"><span class="line">      39: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ACPI_0"><span class="b">X86_FEATURE_ACPI</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">22</span><span class="f">)</span> <span class="k">/* ACPI via MSR */</span>
<a name="40"><span class="line">      40: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MMX_0"><span class="b">X86_FEATURE_MMX</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">23</span><span class="f">)</span> <span class="k">/* Multimedia Extensions */</span>
<a name="41"><span class="line">      41: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FXSR_0"><span class="b">X86_FEATURE_FXSR</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">24</span><span class="f">)</span> <span class="k">/* FXSAVE/FXRSTOR, CR4.OSFXSR */</span>
<a name="42"><span class="line">      42: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XMM_0"><span class="b">X86_FEATURE_XMM</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">25</span><span class="f">)</span> <span class="k">/* &quot;sse&quot; */</span>
<a name="43"><span class="line">      43: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XMM2_0"><span class="b">X86_FEATURE_XMM2</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">26</span><span class="f">)</span> <span class="k">/* &quot;sse2&quot; */</span>
<a name="44"><span class="line">      44: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SELFSNOOP_0"><span class="b">X86_FEATURE_SELFSNOOP</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">27</span><span class="f">)</span> <span class="k">/* &quot;ss&quot; CPU self snoop */</span>
<a name="45"><span class="line">      45: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_HT_0"><span class="b">X86_FEATURE_HT</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">28</span><span class="f">)</span> <span class="k">/* Hyper-Threading */</span>
<a name="46"><span class="line">      46: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ACC_0"><span class="b">X86_FEATURE_ACC</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">29</span><span class="f">)</span> <span class="k">/* &quot;tm&quot; Automatic clock control */</span>
<a name="47"><span class="line">      47: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_IA64_0"><span class="b">X86_FEATURE_IA64</span></a>    <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">30</span><span class="f">)</span> <span class="k">/* IA-64 processor */</span>
<a name="48"><span class="line">      48: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PBE_0"><span class="b">X86_FEATURE_PBE</span></a>        <span class="f">(</span><span class="c">0</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">31</span><span class="f">)</span> <span class="k">/* Pending Break Enable */</span>
<a name="49"><span class="line">      49: </span></a>
<a name="50"><span class="line">      50: </span></a><span class="k">/* AMD-defined CPU features, CPUID level 0x80000001, word 1 */</span>
<a name="51"><span class="line">      51: </span></a><span class="k">/* Don&apos;t duplicate feature flags which are redundant with Intel! */</span>
<a name="52"><span class="line">      52: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SYSCALL_0"><span class="b">X86_FEATURE_SYSCALL</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* SYSCALL/SYSRET */</span>
<a name="53"><span class="line">      53: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MP_0"><span class="b">X86_FEATURE_MP</span></a>        <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">19</span><span class="f">)</span> <span class="k">/* MP Capable. */</span>
<a name="54"><span class="line">      54: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NX_0"><span class="b">X86_FEATURE_NX</span></a>        <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">20</span><span class="f">)</span> <span class="k">/* Execute Disable */</span>
<a name="55"><span class="line">      55: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MMXEXT_0"><span class="b">X86_FEATURE_MMXEXT</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">22</span><span class="f">)</span> <span class="k">/* AMD MMX extensions */</span>
<a name="56"><span class="line">      56: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FXSR_OPT_0"><span class="b">X86_FEATURE_FXSR_OPT</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">25</span><span class="f">)</span> <span class="k">/* FXSAVE/FXRSTOR optimizations */</span>
<a name="57"><span class="line">      57: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_GBPAGES_0"><span class="b">X86_FEATURE_GBPAGES</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">26</span><span class="f">)</span> <span class="k">/* &quot;pdpe1gb&quot; GB pages */</span>
<a name="58"><span class="line">      58: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_RDTSCP_0"><span class="b">X86_FEATURE_RDTSCP</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">27</span><span class="f">)</span> <span class="k">/* RDTSCP */</span>
<a name="59"><span class="line">      59: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LM_0"><span class="b">X86_FEATURE_LM</span></a>        <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">29</span><span class="f">)</span> <span class="k">/* Long Mode (x86-64) */</span>
<a name="60"><span class="line">      60: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_3DNOWEXT_0"><span class="b">X86_FEATURE_3DNOWEXT</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">30</span><span class="f">)</span> <span class="k">/* AMD 3DNow! extensions */</span>
<a name="61"><span class="line">      61: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_3DNOW_0"><span class="b">X86_FEATURE_3DNOW</span></a>    <span class="f">(</span><span class="c">1</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">31</span><span class="f">)</span> <span class="k">/* 3DNow! */</span>
<a name="62"><span class="line">      62: </span></a>
<a name="63"><span class="line">      63: </span></a><span class="k">/* Transmeta-defined CPU features, CPUID level 0x80860001, word 2 */</span>
<a name="64"><span class="line">      64: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_RECOVERY_0"><span class="b">X86_FEATURE_RECOVERY</span></a>    <span class="f">(</span><span class="c">2</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* CPU in recovery mode */</span>
<a name="65"><span class="line">      65: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LONGRUN_0"><span class="b">X86_FEATURE_LONGRUN</span></a>    <span class="f">(</span><span class="c">2</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* Longrun power control */</span>
<a name="66"><span class="line">      66: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LRTI_0"><span class="b">X86_FEATURE_LRTI</span></a>    <span class="f">(</span><span class="c">2</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* LongRun table interface */</span>
<a name="67"><span class="line">      67: </span></a>
<a name="68"><span class="line">      68: </span></a><span class="k">/* Other features, Linux-defined mapping, word 3 */</span>
<a name="69"><span class="line">      69: </span></a><span class="k">/* This range is used for feature bits which conflict or are synthesized */</span>
<a name="70"><span class="line">      70: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CXMMX_0"><span class="b">X86_FEATURE_CXMMX</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* Cyrix MMX extensions */</span>
<a name="71"><span class="line">      71: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_K6_MTRR_0"><span class="b">X86_FEATURE_K6_MTRR</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* AMD K6 nonstandard MTRRs */</span>
<a name="72"><span class="line">      72: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CYRIX_ARR_0"><span class="b">X86_FEATURE_CYRIX_ARR</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* Cyrix ARRs (= MTRRs) */</span>
<a name="73"><span class="line">      73: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CENTAUR_MCR_0"><span class="b">X86_FEATURE_CENTAUR_MCR</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* Centaur MCRs (= MTRRs) */</span>
<a name="74"><span class="line">      74: </span></a><span class="k">/* cpu types for specific tunings: */</span>
<a name="75"><span class="line">      75: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_K8_0"><span class="b">X86_FEATURE_K8</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* &quot;&quot; Opteron, Athlon64 */</span>
<a name="76"><span class="line">      76: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_K7_0"><span class="b">X86_FEATURE_K7</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* &quot;&quot; Athlon */</span>
<a name="77"><span class="line">      77: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_P3_0"><span class="b">X86_FEATURE_P3</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* &quot;&quot; P3 */</span>
<a name="78"><span class="line">      78: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_P4_0"><span class="b">X86_FEATURE_P4</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* &quot;&quot; P4 */</span>
<a name="79"><span class="line">      79: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CONSTANT_TSC_0"><span class="b">X86_FEATURE_CONSTANT_TSC</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* TSC ticks at a constant rate */</span>
<a name="80"><span class="line">      80: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_UP_0"><span class="b">X86_FEATURE_UP</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* smp kernel running on up */</span>
<a name="81"><span class="line">      81: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FXSAVE_LEAK_0"><span class="b">X86_FEATURE_FXSAVE_LEAK</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">10</span><span class="f">)</span> <span class="k">/* &quot;&quot; FXSAVE leaks FOP/FIP/FOP */</span>
<a name="82"><span class="line">      82: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ARCH_PERFMON_0"><span class="b">X86_FEATURE_ARCH_PERFMON</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* Intel Architectural PerfMon */</span>
<a name="83"><span class="line">      83: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PEBS_0"><span class="b">X86_FEATURE_PEBS</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* Precise-Event Based Sampling */</span>
<a name="84"><span class="line">      84: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_BTS_0"><span class="b">X86_FEATURE_BTS</span></a>        <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* Branch Trace Store */</span>
<a name="85"><span class="line">      85: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SYSCALL32_0"><span class="b">X86_FEATURE_SYSCALL32</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">14</span><span class="f">)</span> <span class="k">/* &quot;&quot; syscall in ia32 userspace */</span>
<a name="86"><span class="line">      86: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SYSENTER32_0"><span class="b">X86_FEATURE_SYSENTER32</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">15</span><span class="f">)</span> <span class="k">/* &quot;&quot; sysenter in ia32 userspace */</span>
<a name="87"><span class="line">      87: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_REP_GOOD_0"><span class="b">X86_FEATURE_REP_GOOD</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">16</span><span class="f">)</span> <span class="k">/* rep microcode works well */</span>
<a name="88"><span class="line">      88: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MFENCE_RDTSC_0"><span class="b">X86_FEATURE_MFENCE_RDTSC</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">17</span><span class="f">)</span> <span class="k">/* &quot;&quot; Mfence synchronizes RDTSC */</span>
<a name="89"><span class="line">      89: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LFENCE_RDTSC_0"><span class="b">X86_FEATURE_LFENCE_RDTSC</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">18</span><span class="f">)</span> <span class="k">/* &quot;&quot; Lfence synchronizes RDTSC */</span>
<a name="90"><span class="line">      90: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_11AP_0"><span class="b">X86_FEATURE_11AP</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">19</span><span class="f">)</span> <span class="k">/* &quot;&quot; Bad local APIC aka 11AP */</span>
<a name="91"><span class="line">      91: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NOPL_0"><span class="b">X86_FEATURE_NOPL</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">20</span><span class="f">)</span> <span class="k">/* The NOPL (0F 1F) instructions */</span>
<a name="92"><span class="line">      92: </span></a>                      <span class="k">/* 21 available, was AMD_C1E */</span>
<a name="93"><span class="line">      93: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XTOPOLOGY_0"><span class="b">X86_FEATURE_XTOPOLOGY</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">22</span><span class="f">)</span> <span class="k">/* cpu topology enum extensions */</span>
<a name="94"><span class="line">      94: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TSC_RELIABLE_0"><span class="b">X86_FEATURE_TSC_RELIABLE</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">23</span><span class="f">)</span> <span class="k">/* TSC is known to be reliable */</span>
<a name="95"><span class="line">      95: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NONSTOP_TSC_0"><span class="b">X86_FEATURE_NONSTOP_TSC</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">24</span><span class="f">)</span> <span class="k">/* TSC does not stop in C states */</span>
<a name="96"><span class="line">      96: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CLFLUSH_MONITOR_0"><span class="b">X86_FEATURE_CLFLUSH_MONITOR</span></a> <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">25</span><span class="f">)</span> <span class="k">/* &quot;&quot; clflush reqd with monitor */</span>
<a name="97"><span class="line">      97: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_EXTD_APICID_0"><span class="b">X86_FEATURE_EXTD_APICID</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">26</span><span class="f">)</span> <span class="k">/* has extended APICID (8 bits) */</span>
<a name="98"><span class="line">      98: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_AMD_DCM_0"><span class="b">X86_FEATURE_AMD_DCM</span></a>     <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">27</span><span class="f">)</span> <span class="k">/* multi-node processor */</span>
<a name="99"><span class="line">      99: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_APERFMPERF_0"><span class="b">X86_FEATURE_APERFMPERF</span></a>    <span class="f">(</span><span class="c">3</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">28</span><span class="f">)</span> <span class="k">/* APERFMPERF */</span>
<a name="100"><span class="line">     100: </span></a>
<a name="101"><span class="line">     101: </span></a><span class="k">/* Intel-defined CPU features, CPUID level 0x00000001 (ecx), word 4 */</span>
<a name="102"><span class="line">     102: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XMM3_0"><span class="b">X86_FEATURE_XMM3</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* &quot;pni&quot; SSE-3 */</span>
<a name="103"><span class="line">     103: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PCLMULQDQ_0"><span class="b">X86_FEATURE_PCLMULQDQ</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* PCLMULQDQ instruction */</span>
<a name="104"><span class="line">     104: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DTES64_0"><span class="b">X86_FEATURE_DTES64</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* 64-bit Debug Store */</span>
<a name="105"><span class="line">     105: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MWAIT_0"><span class="b">X86_FEATURE_MWAIT</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* &quot;monitor&quot; Monitor/Mwait support */</span>
<a name="106"><span class="line">     106: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DSCPL_0"><span class="b">X86_FEATURE_DSCPL</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* &quot;ds_cpl&quot; CPL Qual. Debug Store */</span>
<a name="107"><span class="line">     107: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_VMX_0"><span class="b">X86_FEATURE_VMX</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* Hardware virtualization */</span>
<a name="108"><span class="line">     108: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SMX_0"><span class="b">X86_FEATURE_SMX</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* Safer mode */</span>
<a name="109"><span class="line">     109: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_EST_0"><span class="b">X86_FEATURE_EST</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* Enhanced SpeedStep */</span>
<a name="110"><span class="line">     110: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TM2_0"><span class="b">X86_FEATURE_TM2</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* Thermal Monitor 2 */</span>
<a name="111"><span class="line">     111: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SSSE3_0"><span class="b">X86_FEATURE_SSSE3</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* Supplemental SSE-3 */</span>
<a name="112"><span class="line">     112: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CID_0"><span class="b">X86_FEATURE_CID</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">10</span><span class="f">)</span> <span class="k">/* Context ID */</span>
<a name="113"><span class="line">     113: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FMA_0"><span class="b">X86_FEATURE_FMA</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* Fused multiply-add */</span>
<a name="114"><span class="line">     114: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CX16_0"><span class="b">X86_FEATURE_CX16</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* CMPXCHG16B */</span>
<a name="115"><span class="line">     115: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XTPR_0"><span class="b">X86_FEATURE_XTPR</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">14</span><span class="f">)</span> <span class="k">/* Send Task Priority Messages */</span>
<a name="116"><span class="line">     116: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PDCM_0"><span class="b">X86_FEATURE_PDCM</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">15</span><span class="f">)</span> <span class="k">/* Performance Capabilities */</span>
<a name="117"><span class="line">     117: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DCA_0"><span class="b">X86_FEATURE_DCA</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">18</span><span class="f">)</span> <span class="k">/* Direct Cache Access */</span>
<a name="118"><span class="line">     118: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XMM4_1_0"><span class="b">X86_FEATURE_XMM4_1</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">19</span><span class="f">)</span> <span class="k">/* &quot;sse4_1&quot; SSE-4.1 */</span>
<a name="119"><span class="line">     119: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XMM4_2_0"><span class="b">X86_FEATURE_XMM4_2</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">20</span><span class="f">)</span> <span class="k">/* &quot;sse4_2&quot; SSE-4.2 */</span>
<a name="120"><span class="line">     120: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_X2APIC_0"><span class="b">X86_FEATURE_X2APIC</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">21</span><span class="f">)</span> <span class="k">/* x2APIC */</span>
<a name="121"><span class="line">     121: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MOVBE_0"><span class="b">X86_FEATURE_MOVBE</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">22</span><span class="f">)</span> <span class="k">/* MOVBE instruction */</span>
<a name="122"><span class="line">     122: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_POPCNT_0"><span class="b">X86_FEATURE_POPCNT</span></a>      <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">23</span><span class="f">)</span> <span class="k">/* POPCNT instruction */</span>
<a name="123"><span class="line">     123: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_AES_0"><span class="b">X86_FEATURE_AES</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">25</span><span class="f">)</span> <span class="k">/* AES instructions */</span>
<a name="124"><span class="line">     124: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XSAVE_0"><span class="b">X86_FEATURE_XSAVE</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">26</span><span class="f">)</span> <span class="k">/* XSAVE/XRSTOR/XSETBV/XGETBV */</span>
<a name="125"><span class="line">     125: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_OSXSAVE_0"><span class="b">X86_FEATURE_OSXSAVE</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">27</span><span class="f">)</span> <span class="k">/* &quot;&quot; XSAVE enabled in the OS */</span>
<a name="126"><span class="line">     126: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_AVX_0"><span class="b">X86_FEATURE_AVX</span></a>        <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">28</span><span class="f">)</span> <span class="k">/* Advanced Vector Extensions */</span>
<a name="127"><span class="line">     127: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_F16C_0"><span class="b">X86_FEATURE_F16C</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">29</span><span class="f">)</span> <span class="k">/* 16-bit fp conversions */</span>
<a name="128"><span class="line">     128: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_RDRND_0"><span class="b">X86_FEATURE_RDRND</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">30</span><span class="f">)</span> <span class="k">/* The RDRAND instruction */</span>
<a name="129"><span class="line">     129: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_HYPERVISOR_0"><span class="b">X86_FEATURE_HYPERVISOR</span></a>    <span class="f">(</span><span class="c">4</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">31</span><span class="f">)</span> <span class="k">/* Running on a hypervisor */</span>
<a name="130"><span class="line">     130: </span></a>
<a name="131"><span class="line">     131: </span></a><span class="k">/* VIA/Cyrix/Centaur-defined CPU features, CPUID level 0xC0000001, word 5 */</span>
<a name="132"><span class="line">     132: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XSTORE_0"><span class="b">X86_FEATURE_XSTORE</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* &quot;rng&quot; RNG present (xstore) */</span>
<a name="133"><span class="line">     133: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XSTORE_EN_0"><span class="b">X86_FEATURE_XSTORE_EN</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* &quot;rng_en&quot; RNG enabled */</span>
<a name="134"><span class="line">     134: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XCRYPT_0"><span class="b">X86_FEATURE_XCRYPT</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* &quot;ace&quot; on-CPU crypto (xcrypt) */</span>
<a name="135"><span class="line">     135: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XCRYPT_EN_0"><span class="b">X86_FEATURE_XCRYPT_EN</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* &quot;ace_en&quot; on-CPU crypto enabled */</span>
<a name="136"><span class="line">     136: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ACE2_0"><span class="b">X86_FEATURE_ACE2</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* Advanced Cryptography Engine v2 */</span>
<a name="137"><span class="line">     137: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ACE2_EN_0"><span class="b">X86_FEATURE_ACE2_EN</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* ACE v2 enabled */</span>
<a name="138"><span class="line">     138: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PHE_0"><span class="b">X86_FEATURE_PHE</span></a>        <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">10</span><span class="f">)</span> <span class="k">/* PadLock Hash Engine */</span>
<a name="139"><span class="line">     139: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PHE_EN_0"><span class="b">X86_FEATURE_PHE_EN</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* PHE enabled */</span>
<a name="140"><span class="line">     140: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PMM_0"><span class="b">X86_FEATURE_PMM</span></a>        <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* PadLock Montgomery Multiplier */</span>
<a name="141"><span class="line">     141: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PMM_EN_0"><span class="b">X86_FEATURE_PMM_EN</span></a>    <span class="f">(</span><span class="c">5</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* PMM enabled */</span>
<a name="142"><span class="line">     142: </span></a>
<a name="143"><span class="line">     143: </span></a><span class="k">/* More extended AMD flags: CPUID level 0x80000001, ecx, word 6 */</span>
<a name="144"><span class="line">     144: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LAHF_LM_0"><span class="b">X86_FEATURE_LAHF_LM</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* LAHF/SAHF in long mode */</span>
<a name="145"><span class="line">     145: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CMP_LEGACY_0"><span class="b">X86_FEATURE_CMP_LEGACY</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* If yes HyperThreading not valid */</span>
<a name="146"><span class="line">     146: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SVM_0"><span class="b">X86_FEATURE_SVM</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* Secure virtual machine */</span>
<a name="147"><span class="line">     147: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_EXTAPIC_0"><span class="b">X86_FEATURE_EXTAPIC</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* Extended APIC space */</span>
<a name="148"><span class="line">     148: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CR8_LEGACY_0"><span class="b">X86_FEATURE_CR8_LEGACY</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* CR8 in 32-bit mode */</span>
<a name="149"><span class="line">     149: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ABM_0"><span class="b">X86_FEATURE_ABM</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* Advanced bit manipulation */</span>
<a name="150"><span class="line">     150: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SSE4A_0"><span class="b">X86_FEATURE_SSE4A</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* SSE-4A */</span>
<a name="151"><span class="line">     151: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_MISALIGNSSE_0"><span class="b">X86_FEATURE_MISALIGNSSE</span></a> <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* Misaligned SSE mode */</span>
<a name="152"><span class="line">     152: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_3DNOWPREFETCH_0"><span class="b">X86_FEATURE_3DNOWPREFETCH</span></a> <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* 3DNow prefetch instructions */</span>
<a name="153"><span class="line">     153: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_OSVW_0"><span class="b">X86_FEATURE_OSVW</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* OS Visible Workaround */</span>
<a name="154"><span class="line">     154: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_IBS_0"><span class="b">X86_FEATURE_IBS</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">10</span><span class="f">)</span> <span class="k">/* Instruction Based Sampling */</span>
<a name="155"><span class="line">     155: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XOP_0"><span class="b">X86_FEATURE_XOP</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* extended AVX instructions */</span>
<a name="156"><span class="line">     156: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SKINIT_0"><span class="b">X86_FEATURE_SKINIT</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* SKINIT/STGI instructions */</span>
<a name="157"><span class="line">     157: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_WDT_0"><span class="b">X86_FEATURE_WDT</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* Watchdog timer */</span>
<a name="158"><span class="line">     158: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LWP_0"><span class="b">X86_FEATURE_LWP</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">15</span><span class="f">)</span> <span class="k">/* Light Weight Profiling */</span>
<a name="159"><span class="line">     159: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FMA4_0"><span class="b">X86_FEATURE_FMA4</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">16</span><span class="f">)</span> <span class="k">/* 4 operands MAC instructions */</span>
<a name="160"><span class="line">     160: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NODEID_MSR_0"><span class="b">X86_FEATURE_NODEID_MSR</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">19</span><span class="f">)</span> <span class="k">/* NodeId MSR */</span>
<a name="161"><span class="line">     161: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TBM_0"><span class="b">X86_FEATURE_TBM</span></a>        <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">21</span><span class="f">)</span> <span class="k">/* trailing bit manipulations */</span>
<a name="162"><span class="line">     162: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TOPOEXT_0"><span class="b">X86_FEATURE_TOPOEXT</span></a>    <span class="f">(</span><span class="c">6</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">22</span><span class="f">)</span> <span class="k">/* topology extensions CPUID leafs */</span>
<a name="163"><span class="line">     163: </span></a>
<a name="164"><span class="line">     164: </span></a><span class="k">/*
<a name="165"><span class="line">     165: </span></a> * Auxiliary flags: Linux defined - For features scattered in various
<a name="166"><span class="line">     166: </span></a> * CPUID levels like 0x6, 0xA etc, word 7
<a name="167"><span class="line">     167: </span></a> */</span>
<a name="168"><span class="line">     168: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_IDA_0"><span class="b">X86_FEATURE_IDA</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* Intel Dynamic Acceleration */</span>
<a name="169"><span class="line">     169: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_ARAT_0"><span class="b">X86_FEATURE_ARAT</span></a>    <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* Always Running APIC Timer */</span>
<a name="170"><span class="line">     170: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_CPB_0"><span class="b">X86_FEATURE_CPB</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* AMD Core Performance Boost */</span>
<a name="171"><span class="line">     171: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_EPB_0"><span class="b">X86_FEATURE_EPB</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* IA32_ENERGY_PERF_BIAS support */</span>
<a name="172"><span class="line">     172: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_XSAVEOPT_0"><span class="b">X86_FEATURE_XSAVEOPT</span></a>    <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* Optimized Xsave */</span>
<a name="173"><span class="line">     173: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PLN_0"><span class="b">X86_FEATURE_PLN</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* Intel Power Limit Notification */</span>
<a name="174"><span class="line">     174: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PTS_0"><span class="b">X86_FEATURE_PTS</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* Intel Package Thermal Status */</span>
<a name="175"><span class="line">     175: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DTS_0"><span class="b">X86_FEATURE_DTS</span></a>        <span class="f">(</span><span class="c">7</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* Digital Thermal Sensor */</span>
<a name="176"><span class="line">     176: </span></a>
<a name="177"><span class="line">     177: </span></a><span class="k">/* Virtualization flags: Linux defined, word 8 */</span>
<a name="178"><span class="line">     178: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TPR_SHADOW_0"><span class="b">X86_FEATURE_TPR_SHADOW</span></a>  <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* Intel TPR Shadow */</span>
<a name="179"><span class="line">     179: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_VNMI_0"><span class="b">X86_FEATURE_VNMI</span></a>        <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">1</span><span class="f">)</span> <span class="k">/* Intel Virtual NMI */</span>
<a name="180"><span class="line">     180: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FLEXPRIORITY_0"><span class="b">X86_FEATURE_FLEXPRIORITY</span></a> <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">2</span><span class="f">)</span> <span class="k">/* Intel FlexPriority */</span>
<a name="181"><span class="line">     181: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_EPT_0"><span class="b">X86_FEATURE_EPT</span></a>         <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">3</span><span class="f">)</span> <span class="k">/* Intel Extended Page Table */</span>
<a name="182"><span class="line">     182: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_VPID_0"><span class="b">X86_FEATURE_VPID</span></a>        <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">4</span><span class="f">)</span> <span class="k">/* Intel Virtual Processor ID */</span>
<a name="183"><span class="line">     183: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NPT_0"><span class="b">X86_FEATURE_NPT</span></a>        <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">5</span><span class="f">)</span> <span class="k">/* AMD Nested Page Table support */</span>
<a name="184"><span class="line">     184: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_LBRV_0"><span class="b">X86_FEATURE_LBRV</span></a>    <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">6</span><span class="f">)</span> <span class="k">/* AMD LBR Virtualization support */</span>
<a name="185"><span class="line">     185: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_SVML_0"><span class="b">X86_FEATURE_SVML</span></a>    <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">7</span><span class="f">)</span> <span class="k">/* &quot;svm_lock&quot; AMD SVM locking MSR */</span>
<a name="186"><span class="line">     186: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_NRIPS_0"><span class="b">X86_FEATURE_NRIPS</span></a>    <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">8</span><span class="f">)</span> <span class="k">/* &quot;nrip_save&quot; AMD SVM next_rip save */</span>
<a name="187"><span class="line">     187: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_TSCRATEMSR_0"><span class="b">X86_FEATURE_TSCRATEMSR</span></a>  <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">9</span><span class="f">)</span> <span class="k">/* &quot;tsc_scale&quot; AMD TSC scaling support */</span>
<a name="188"><span class="line">     188: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_VMCBCLEAN_0"><span class="b">X86_FEATURE_VMCBCLEAN</span></a>   <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">10</span><span class="f">)</span> <span class="k">/* &quot;vmcb_clean&quot; AMD VMCB clean bits support */</span>
<a name="189"><span class="line">     189: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FLUSHBYASID_0"><span class="b">X86_FEATURE_FLUSHBYASID</span></a> <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">11</span><span class="f">)</span> <span class="k">/* AMD flush-by-ASID support */</span>
<a name="190"><span class="line">     190: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_DECODEASSISTS_0"><span class="b">X86_FEATURE_DECODEASSISTS</span></a> <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">12</span><span class="f">)</span> <span class="k">/* AMD Decode Assists support */</span>
<a name="191"><span class="line">     191: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PAUSEFILTER_0"><span class="b">X86_FEATURE_PAUSEFILTER</span></a> <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">13</span><span class="f">)</span> <span class="k">/* AMD filtered pause intercept */</span>
<a name="192"><span class="line">     192: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_PFTHRESHOLD_0"><span class="b">X86_FEATURE_PFTHRESHOLD</span></a> <span class="f">(</span><span class="c">8</span><span class="f">*</span><span class="c">32</span><span class="f">+</span><span class="c">14</span><span class="f">)</span> <span class="k">/* AMD pause filter threshold */</span>
<a name="193"><span class="line">     193: </span></a>
<a name="194"><span class="line">     194: </span></a>
<a name="195"><span class="line">     195: </span></a><span class="k">/* Intel-defined CPU features, CPUID level 0x00000007:0 (ebx), word 9 */</span>
<a name="196"><span class="line">     196: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#X86_FEATURE_FSGSBASE_0"><span class="b">X86_FEATURE_FSGSBASE</span></a>    <span class="f">(</span><span class="c">9</span><span class="f">*</span><span class="c">32</span><span class="f">+</span> <span class="c">0</span><span class="f">)</span> <span class="k">/* {RD/WR}{FS/GS}BASE instructions*/</span>
<a name="197"><span class="line">     197: </span></a>
<a name="198"><span class="line">     198: </span></a><span class="f">#</span><span class="n">if</span> <span class="b">defined</span><span class="f">(</span><a href="cpu.c_macros.html#__KERNEL___0"><span class="b">__KERNEL__</span></a><span class="f">)</span> <span class="f">&amp;&amp;</span> <span class="f">!</span><span class="b">defined</span><span class="f">(</span><a href="cpu.c_macros.html#ZX19BU1NFTUJMWV9fX3Rlc3Rub3RkZWY_"><span class="b">__ASSEMBLY__</span></a><span class="f">)</span>
<a name="199"><span class="line">     199: </span></a>
<a name="200"><span class="line">     200: </span></a><span class="f">#</span><span class="n">include</span> <span class="f">&lt;</span><span class="m">asm</span><span class="f">/</span><span class="m">asm</span><span class="f">.</span><span class="b">h</span><span class="f">&gt;</span>
<a name="201"><span class="line">     201: </span></a><span class="f">#</span><span class="n">include</span> <span class="f">&lt;</span><span class="b">linux</span><span class="f">/</span><span class="b">bitops</span><span class="f">.</span><span class="b">h</span><span class="f">&gt;</span>
<a name="202"><span class="line">     202: </span></a>
<a name="203"><span class="line">     203: </span></a><span class="m">extern</span> <span class="m">const</span> <span class="m">char</span> <span class="f">*</span> <span class="m">const</span> <span class="b">x86_cap_flags</span><span class="f">[</span><a href="cpu.c_macros.html#NCAPINTS_0"><span class="b">NCAPINTS</span></a><span class="f">*</span><span class="c">32</span><span class="f">]</span><span class="f">;</span>
<a name="204"><span class="line">     204: </span></a><span class="m">extern</span> <span class="m">const</span> <span class="m">char</span> <span class="f">*</span> <span class="m">const</span> <span class="b">x86_power_flags</span><span class="f">[</span><span class="c">32</span><span class="f">]</span><span class="f">;</span>
<a name="205"><span class="line">     205: </span></a>
<a name="206"><span class="line">     206: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#test_cpu_cap(c,bit)_0"><span class="b">test_cpu_cap</span></a><span class="f">(</span><span class="b">c</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span>                        \
<a name="207"><span class="line">     207: </span></a>     <a href="cpu.c_macros.html#test_bit(nr,addr)_0"><span class="b">test_bit</span></a><span class="f">(</span><span class="b">bit</span><span class="f">,</span> <span class="f">(</span><span class="m">unsigned</span> <span class="m">long</span> <span class="f">*</span><span class="f">)</span><span class="f">(</span><span class="f">(</span><span class="b">c</span><span class="f">)</span><span class="f">-&gt;</span><span class="b">x86_capability</span><span class="f">)</span><span class="f">)</span>
<a name="208"><span class="line">     208: </span></a>
<a name="209"><span class="line">     209: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has(c,bit)_0"><span class="b">cpu_has</span></a><span class="f">(</span><span class="b">c</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span>                            \
<a name="210"><span class="line">     210: </span></a>    <span class="f">(</span><span class="b">__builtin_constant_p</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="f">&amp;&amp;</span>                    \
<a name="211"><span class="line">     211: </span></a>     <span class="f">(</span> <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">0</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK0_0"><span class="b">REQUIRED_MASK0</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="212"><span class="line">     212: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">1</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK1_0"><span class="b">REQUIRED_MASK1</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="213"><span class="line">     213: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">2</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK2_0"><span class="b">REQUIRED_MASK2</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="214"><span class="line">     214: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">3</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK3_0"><span class="b">REQUIRED_MASK3</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="215"><span class="line">     215: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">4</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK4_0"><span class="b">REQUIRED_MASK4</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="216"><span class="line">     216: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">5</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK5_0"><span class="b">REQUIRED_MASK5</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="217"><span class="line">     217: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">6</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK6_0"><span class="b">REQUIRED_MASK6</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="218"><span class="line">     218: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">7</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK7_0"><span class="b">REQUIRED_MASK7</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="219"><span class="line">     219: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">8</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK8_0"><span class="b">REQUIRED_MASK8</span></a><span class="f">)</span><span class="f">)</span> <span class="f">||</span>    \
<a name="220"><span class="line">     220: </span></a>       <span class="f">(</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&gt;&gt;</span><span class="c">5</span><span class="f">)</span><span class="f">==</span><span class="c">9</span> <span class="f">&amp;&amp;</span> <span class="f">(</span><span class="c">1UL</span><span class="f">&lt;&lt;</span><span class="f">(</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">&amp;</span><span class="c">31</span><span class="f">)</span> <span class="f">&amp;</span> <a href="cpu.c_macros.html#REQUIRED_MASK9_0"><span class="b">REQUIRED_MASK9</span></a><span class="f">)</span><span class="f">)</span> <span class="f">)</span>    \
<a name="221"><span class="line">     221: </span></a>      <span class="f">?</span> <span class="c">1</span> <span class="f">:</span>                                \
<a name="222"><span class="line">     222: </span></a>     <a href="cpu.c_macros.html#test_cpu_cap(c,bit)_0"><span class="b">test_cpu_cap</span></a><span class="f">(</span><span class="b">c</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span><span class="f">)</span>
<a name="223"><span class="line">     223: </span></a>
<a name="224"><span class="line">     224: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span>    <a href="cpu.c_macros.html#cpu_has(c,bit)_0"><span class="b">cpu_has</span></a><span class="f">(</span><span class="f">&amp;</span><span class="b">boot_cpu_data</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span>
<a name="225"><span class="line">     225: </span></a>
<a name="226"><span class="line">     226: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#set_cpu_cap(c,bit)_0"><span class="b">set_cpu_cap</span></a><span class="f">(</span><span class="b">c</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span>    <span class="b">set_bit</span><span class="f">(</span><span class="b">bit</span><span class="f">,</span> <span class="f">(</span><span class="m">unsigned</span> <span class="m">long</span> <span class="f">*</span><span class="f">)</span><span class="f">(</span><span class="f">(</span><span class="b">c</span><span class="f">)</span><span class="f">-&gt;</span><span class="b">x86_capability</span><span class="f">)</span><span class="f">)</span>
<a name="227"><span class="line">     227: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#clear_cpu_cap(c,bit)_0"><span class="b">clear_cpu_cap</span></a><span class="f">(</span><span class="b">c</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span>    <span class="b">clear_bit</span><span class="f">(</span><span class="b">bit</span><span class="f">,</span> <span class="f">(</span><span class="m">unsigned</span> <span class="m">long</span> <span class="f">*</span><span class="f">)</span><span class="f">(</span><span class="f">(</span><span class="b">c</span><span class="f">)</span><span class="f">-&gt;</span><span class="b">x86_capability</span><span class="f">)</span><span class="f">)</span>
<a name="228"><span class="line">     228: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#setup_clear_cpu_cap(bit)_0"><span class="b">setup_clear_cpu_cap</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="m">do</span> <span class="f">{</span> \
<a name="229"><span class="line">     229: </span></a>    <a href="cpu.c_macros.html#clear_cpu_cap(c,bit)_0"><span class="b">clear_cpu_cap</span></a><span class="f">(</span><span class="f">&amp;</span><span class="b">boot_cpu_data</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span><span class="f">;</span>    \
<a name="230"><span class="line">     230: </span></a>    <span class="b">set_bit</span><span class="f">(</span><span class="b">bit</span><span class="f">,</span> <span class="f">(</span><span class="m">unsigned</span> <span class="m">long</span> <span class="f">*</span><span class="f">)</span><span class="b">cpu_caps_cleared</span><span class="f">)</span><span class="f">;</span> \
<a name="231"><span class="line">     231: </span></a><span class="f">}</span> <span class="m">while</span> <span class="f">(</span><span class="c">0</span><span class="f">)</span>
<a name="232"><span class="line">     232: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#setup_force_cpu_cap(bit)_0"><span class="b">setup_force_cpu_cap</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="m">do</span> <span class="f">{</span> \
<a name="233"><span class="line">     233: </span></a>    <a href="cpu.c_macros.html#set_cpu_cap(c,bit)_0"><span class="b">set_cpu_cap</span></a><span class="f">(</span><span class="f">&amp;</span><span class="b">boot_cpu_data</span><span class="f">,</span> <span class="b">bit</span><span class="f">)</span><span class="f">;</span>    \
<a name="234"><span class="line">     234: </span></a>    <span class="b">set_bit</span><span class="f">(</span><span class="b">bit</span><span class="f">,</span> <span class="f">(</span><span class="m">unsigned</span> <span class="m">long</span> <span class="f">*</span><span class="f">)</span><span class="b">cpu_caps_set</span><span class="f">)</span><span class="f">;</span>    \
<a name="235"><span class="line">     235: </span></a><span class="f">}</span> <span class="m">while</span> <span class="f">(</span><span class="c">0</span><span class="f">)</span>
<a name="236"><span class="line">     236: </span></a>
<a name="237"><span class="line">     237: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_fpu_0"><span class="b">cpu_has_fpu</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_FPU_0"><span class="b">X86_FEATURE_FPU</span></a><span class="f">)</span>
<a name="238"><span class="line">     238: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_vme_0"><span class="b">cpu_has_vme</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_VME_0"><span class="b">X86_FEATURE_VME</span></a><span class="f">)</span>
<a name="239"><span class="line">     239: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_de_0"><span class="b">cpu_has_de</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_DE_0"><span class="b">X86_FEATURE_DE</span></a><span class="f">)</span>
<a name="240"><span class="line">     240: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pse_0"><span class="b">cpu_has_pse</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PSE_0"><span class="b">X86_FEATURE_PSE</span></a><span class="f">)</span>
<a name="241"><span class="line">     241: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_tsc_0"><span class="b">cpu_has_tsc</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_TSC_0"><span class="b">X86_FEATURE_TSC</span></a><span class="f">)</span>
<a name="242"><span class="line">     242: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pae_0"><span class="b">cpu_has_pae</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PAE_0"><span class="b">X86_FEATURE_PAE</span></a><span class="f">)</span>
<a name="243"><span class="line">     243: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pge_0"><span class="b">cpu_has_pge</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PGE_0"><span class="b">X86_FEATURE_PGE</span></a><span class="f">)</span>
<a name="244"><span class="line">     244: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_apic_0"><span class="b">cpu_has_apic</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_APIC_0"><span class="b">X86_FEATURE_APIC</span></a><span class="f">)</span>
<a name="245"><span class="line">     245: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_sep_0"><span class="b">cpu_has_sep</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_SEP_0"><span class="b">X86_FEATURE_SEP</span></a><span class="f">)</span>
<a name="246"><span class="line">     246: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_mtrr_0"><span class="b">cpu_has_mtrr</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_MTRR_0"><span class="b">X86_FEATURE_MTRR</span></a><span class="f">)</span>
<a name="247"><span class="line">     247: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_mmx_0"><span class="b">cpu_has_mmx</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_MMX_0"><span class="b">X86_FEATURE_MMX</span></a><span class="f">)</span>
<a name="248"><span class="line">     248: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_fxsr_0"><span class="b">cpu_has_fxsr</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_FXSR_0"><span class="b">X86_FEATURE_FXSR</span></a><span class="f">)</span>
<a name="249"><span class="line">     249: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xmm_0"><span class="b">cpu_has_xmm</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XMM_0"><span class="b">X86_FEATURE_XMM</span></a><span class="f">)</span>
<a name="250"><span class="line">     250: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xmm2_0"><span class="b">cpu_has_xmm2</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XMM2_0"><span class="b">X86_FEATURE_XMM2</span></a><span class="f">)</span>
<a name="251"><span class="line">     251: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xmm3_0"><span class="b">cpu_has_xmm3</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XMM3_0"><span class="b">X86_FEATURE_XMM3</span></a><span class="f">)</span>
<a name="252"><span class="line">     252: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_aes_0"><span class="b">cpu_has_aes</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_AES_0"><span class="b">X86_FEATURE_AES</span></a><span class="f">)</span>
<a name="253"><span class="line">     253: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_ht_0"><span class="b">cpu_has_ht</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_HT_0"><span class="b">X86_FEATURE_HT</span></a><span class="f">)</span>
<a name="254"><span class="line">     254: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_mp_0"><span class="b">cpu_has_mp</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_MP_0"><span class="b">X86_FEATURE_MP</span></a><span class="f">)</span>
<a name="255"><span class="line">     255: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_nx_0"><span class="b">cpu_has_nx</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_NX_0"><span class="b">X86_FEATURE_NX</span></a><span class="f">)</span>
<a name="256"><span class="line">     256: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_k6_mtrr_0"><span class="b">cpu_has_k6_mtrr</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_K6_MTRR_0"><span class="b">X86_FEATURE_K6_MTRR</span></a><span class="f">)</span>
<a name="257"><span class="line">     257: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_cyrix_arr_0"><span class="b">cpu_has_cyrix_arr</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_CYRIX_ARR_0"><span class="b">X86_FEATURE_CYRIX_ARR</span></a><span class="f">)</span>
<a name="258"><span class="line">     258: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_centaur_mcr_0"><span class="b">cpu_has_centaur_mcr</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_CENTAUR_MCR_0"><span class="b">X86_FEATURE_CENTAUR_MCR</span></a><span class="f">)</span>
<a name="259"><span class="line">     259: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xstore_0"><span class="b">cpu_has_xstore</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XSTORE_0"><span class="b">X86_FEATURE_XSTORE</span></a><span class="f">)</span>
<a name="260"><span class="line">     260: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xstore_enabled_0"><span class="b">cpu_has_xstore_enabled</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XSTORE_EN_0"><span class="b">X86_FEATURE_XSTORE_EN</span></a><span class="f">)</span>
<a name="261"><span class="line">     261: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xcrypt_0"><span class="b">cpu_has_xcrypt</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XCRYPT_0"><span class="b">X86_FEATURE_XCRYPT</span></a><span class="f">)</span>
<a name="262"><span class="line">     262: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xcrypt_enabled_0"><span class="b">cpu_has_xcrypt_enabled</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XCRYPT_EN_0"><span class="b">X86_FEATURE_XCRYPT_EN</span></a><span class="f">)</span>
<a name="263"><span class="line">     263: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_ace2_0"><span class="b">cpu_has_ace2</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_ACE2_0"><span class="b">X86_FEATURE_ACE2</span></a><span class="f">)</span>
<a name="264"><span class="line">     264: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_ace2_enabled_0"><span class="b">cpu_has_ace2_enabled</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_ACE2_EN_0"><span class="b">X86_FEATURE_ACE2_EN</span></a><span class="f">)</span>
<a name="265"><span class="line">     265: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_phe_0"><span class="b">cpu_has_phe</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PHE_0"><span class="b">X86_FEATURE_PHE</span></a><span class="f">)</span>
<a name="266"><span class="line">     266: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_phe_enabled_0"><span class="b">cpu_has_phe_enabled</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PHE_EN_0"><span class="b">X86_FEATURE_PHE_EN</span></a><span class="f">)</span>
<a name="267"><span class="line">     267: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pmm_0"><span class="b">cpu_has_pmm</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PMM_0"><span class="b">X86_FEATURE_PMM</span></a><span class="f">)</span>
<a name="268"><span class="line">     268: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pmm_enabled_0"><span class="b">cpu_has_pmm_enabled</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PMM_EN_0"><span class="b">X86_FEATURE_PMM_EN</span></a><span class="f">)</span>
<a name="269"><span class="line">     269: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_ds_0"><span class="b">cpu_has_ds</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_DS_0"><span class="b">X86_FEATURE_DS</span></a><span class="f">)</span>
<a name="270"><span class="line">     270: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pebs_0"><span class="b">cpu_has_pebs</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PEBS_0"><span class="b">X86_FEATURE_PEBS</span></a><span class="f">)</span>
<a name="271"><span class="line">     271: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_clflush_0"><span class="b">cpu_has_clflush</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_CLFLSH_0"><span class="b">X86_FEATURE_CLFLSH</span></a><span class="f">)</span>
<a name="272"><span class="line">     272: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_bts_0"><span class="b">cpu_has_bts</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_BTS_0"><span class="b">X86_FEATURE_BTS</span></a><span class="f">)</span>
<a name="273"><span class="line">     273: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_gbpages_0"><span class="b">cpu_has_gbpages</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_GBPAGES_0"><span class="b">X86_FEATURE_GBPAGES</span></a><span class="f">)</span>
<a name="274"><span class="line">     274: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_arch_perfmon_0"><span class="b">cpu_has_arch_perfmon</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_ARCH_PERFMON_0"><span class="b">X86_FEATURE_ARCH_PERFMON</span></a><span class="f">)</span>
<a name="275"><span class="line">     275: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pat_0"><span class="b">cpu_has_pat</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PAT_0"><span class="b">X86_FEATURE_PAT</span></a><span class="f">)</span>
<a name="276"><span class="line">     276: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xmm4_1_0"><span class="b">cpu_has_xmm4_1</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XMM4_1_0"><span class="b">X86_FEATURE_XMM4_1</span></a><span class="f">)</span>
<a name="277"><span class="line">     277: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xmm4_2_0"><span class="b">cpu_has_xmm4_2</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XMM4_2_0"><span class="b">X86_FEATURE_XMM4_2</span></a><span class="f">)</span>
<a name="278"><span class="line">     278: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_x2apic_0"><span class="b">cpu_has_x2apic</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_X2APIC_0"><span class="b">X86_FEATURE_X2APIC</span></a><span class="f">)</span>
<a name="279"><span class="line">     279: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_xsave_0"><span class="b">cpu_has_xsave</span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_XSAVE_0"><span class="b">X86_FEATURE_XSAVE</span></a><span class="f">)</span>
<a name="280"><span class="line">     280: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_hypervisor_0"><span class="b">cpu_has_hypervisor</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_HYPERVISOR_0"><span class="b">X86_FEATURE_HYPERVISOR</span></a><span class="f">)</span>
<a name="281"><span class="line">     281: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pclmulqdq_0"><span class="b">cpu_has_pclmulqdq</span></a>    <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><a href="cpu.c_macros.html#X86_FEATURE_PCLMULQDQ_0"><span class="b">X86_FEATURE_PCLMULQDQ</span></a><span class="f">)</span>
<a name="282"><span class="line">     282: </span></a>
<a name="283"><span class="line">     283: </span></a><span class="f">#</span><span class="n">if</span> <span class="b">defined</span><span class="f">(</span><a href="cpu.c_macros.html#ZQ09ORklHX1g4Nl9JTlZMUEdfdGVzdG5vdGRlZg__"><span class="b">CONFIG_X86_INVLPG</span></a><span class="f">)</span> <span class="f">||</span> <span class="b">defined</span><span class="f">(</span><a href="cpu.c_macros.html#ZQ09ORklHX1g4Nl82NF90ZXN0bm90ZGVm"><span class="b">CONFIG_X86_64</span></a><span class="f">)</span>
<a name="284"><span class="line">     284: </span></a><span class="f">#</span> <span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_invlpg_0"><span class="b">cpu_has_invlpg</span></a>        <span class="c">1</span>
<a name="285"><span class="line">     285: </span></a><span class="f">#</span><span class="n">else</span>
<a name="286"><span class="line">     286: </span></a><span class="f">#</span> <span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_invlpg_0"><span class="b">cpu_has_invlpg</span></a>        <span class="f">(</span><span class="b">boot_cpu_data</span><span class="f">.</span><span class="b">x86</span> <span class="f">&gt;</span> <span class="c">3</span><span class="f">)</span>
<a name="287"><span class="line">     287: </span></a><span class="f">#</span><span class="n">endif</span>
<a name="288"><span class="line">     288: </span></a>
<a name="289"><span class="line">     289: </span></a><span class="f">#</span><span class="n">ifdef</span> <a href="cpu.c_macros.html#ZQ09ORklHX1g4Nl82NF90ZXN0bm90ZGVm"><span class="b">CONFIG_X86_64</span></a>
<a name="290"><span class="line">     290: </span></a>
<a name="291"><span class="line">     291: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_vme_0"><span class="b">cpu_has_vme</span></a>
<a name="292"><span class="line">     292: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_vme_0"><span class="b">cpu_has_vme</span></a>        <span class="c">0</span>
<a name="293"><span class="line">     293: </span></a>
<a name="294"><span class="line">     294: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_pae_0"><span class="b">cpu_has_pae</span></a>
<a name="295"><span class="line">     295: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_pae_0"><span class="b">cpu_has_pae</span></a>        <span class="b">___BUG___</span>
<a name="296"><span class="line">     296: </span></a>
<a name="297"><span class="line">     297: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_mp_0"><span class="b">cpu_has_mp</span></a>
<a name="298"><span class="line">     298: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_mp_0"><span class="b">cpu_has_mp</span></a>        <span class="c">1</span>
<a name="299"><span class="line">     299: </span></a>
<a name="300"><span class="line">     300: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_k6_mtrr_0"><span class="b">cpu_has_k6_mtrr</span></a>
<a name="301"><span class="line">     301: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_k6_mtrr_0"><span class="b">cpu_has_k6_mtrr</span></a>        <span class="c">0</span>
<a name="302"><span class="line">     302: </span></a>
<a name="303"><span class="line">     303: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_cyrix_arr_0"><span class="b">cpu_has_cyrix_arr</span></a>
<a name="304"><span class="line">     304: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_cyrix_arr_0"><span class="b">cpu_has_cyrix_arr</span></a>    <span class="c">0</span>
<a name="305"><span class="line">     305: </span></a>
<a name="306"><span class="line">     306: </span></a><span class="f">#</span><span class="n">undef</span>  <a href="cpu.c_macros.html#cpu_has_centaur_mcr_0"><span class="b">cpu_has_centaur_mcr</span></a>
<a name="307"><span class="line">     307: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#cpu_has_centaur_mcr_0"><span class="b">cpu_has_centaur_mcr</span></a>    <span class="c">0</span>
<a name="308"><span class="line">     308: </span></a>
<a name="309"><span class="line">     309: </span></a><span class="f">#</span><span class="n">endif</span> <span class="k">/* CONFIG_X86_64 */</span>
<a name="310"><span class="line">     310: </span></a>
<a name="311"><span class="line">     311: </span></a><span class="f">#</span><span class="n">if</span> <a href="cpu.c_macros.html#ZX19HTlVDX19fdGVzdG5vdGRlZg__"><span class="b">__GNUC__</span></a> <span class="f">&gt;=</span> <span class="c">4</span>
<a name="312"><span class="line">     312: </span></a><span class="k">/*
<a name="313"><span class="line">     313: </span></a> * Static testing of CPU features.  Used the same as boot_cpu_has().
<a name="314"><span class="line">     314: </span></a> * These are only valid after alternatives have run, but will statically
<a name="315"><span class="line">     315: </span></a> * patch the target code for additional performance.
<a name="316"><span class="line">     316: </span></a> *
<a name="317"><span class="line">     317: </span></a> */</span>
<a name="318"><span class="line">     318: </span></a><span class="m">static</span> <a href="cpu.c_macros.html#__always_inline_0"><span class="b">__always_inline</span></a> <span class="b">__pure</span> <span class="m">bool</span> <span class="b">__static_cpu_has</span><span class="f">(</span><span class="b">u16</span> <span class="b">bit</span><span class="f">)</span>
<a name="319"><span class="line">     319: </span></a><span class="f">{</span>
<a name="320"><span class="line">     320: </span></a><span class="f">#</span><span class="n">if</span> <a href="cpu.c_macros.html#ZX19HTlVDX19fdGVzdG5vdGRlZg__"><span class="b">__GNUC__</span></a> <span class="f">&gt;</span> <span class="c">4</span> <span class="f">||</span> <span class="b">__GNUC_MINOR__</span> <span class="f">&gt;=</span> <span class="c">5</span>
<a name="321"><span class="line">     321: </span></a>        <span class="m">asm</span> <span class="m">goto</span><span class="f">(</span><span class="e">&quot;1: jmp %l[t_no]\n&quot;</span>
<a name="322"><span class="line">     322: </span></a>             <span class="e">&quot;2:\n&quot;</span>
<a name="323"><span class="line">     323: </span></a>             <span class="e">&quot;.section .altinstructions,\&quot;a\&quot;\n&quot;</span>
<a name="324"><span class="line">     324: </span></a>             <a href="cpu.c_macros.html#_ASM_ALIGN_0"><span class="b">_ASM_ALIGN</span></a> <span class="e">&quot;\n&quot;</span>
<a name="325"><span class="line">     325: </span></a>             <a href="cpu.c_macros.html#_ASM_PTR_0"><span class="b">_ASM_PTR</span></a> <span class="e">&quot;1b\n&quot;</span>
<a name="326"><span class="line">     326: </span></a>             <a href="cpu.c_macros.html#_ASM_PTR_0"><span class="b">_ASM_PTR</span></a> <span class="e">&quot;0\n&quot;</span>     <span class="k">/* no replacement */</span>
<a name="327"><span class="line">     327: </span></a>             <span class="e">&quot; .word %P0\n&quot;</span>        <span class="k">/* feature bit */</span>
<a name="328"><span class="line">     328: </span></a>             <span class="e">&quot; .byte 2b - 1b\n&quot;</span>    <span class="k">/* source len */</span>
<a name="329"><span class="line">     329: </span></a>             <span class="e">&quot; .byte 0\n&quot;</span>        <span class="k">/* replacement len */</span>
<a name="330"><span class="line">     330: </span></a>             <span class="e">&quot;.previous\n&quot;</span>
<a name="331"><span class="line">     331: </span></a>             <span class="k">/* skipping size check since replacement size = 0 */</span>
<a name="332"><span class="line">     332: </span></a>             <span class="f">:</span> <span class="f">:</span> <span class="e">&quot;i&quot;</span> <span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="f">:</span> <span class="f">:</span> <span class="b">t_no</span><span class="f">)</span><span class="f">;</span>
<a name="333"><span class="line">     333: </span></a>        <span class="m">return</span> <span class="m">true</span><span class="f">;</span>
<a name="334"><span class="line">     334: </span></a>    <span class="b">t_no</span><span class="f">:</span>
<a name="335"><span class="line">     335: </span></a>        <span class="m">return</span> <span class="m">false</span><span class="f">;</span>
<a name="336"><span class="line">     336: </span></a><span class="f">#</span><span class="n">else</span>
<a name="337"><span class="line">     337: </span></a>        <span class="b">u8</span> <span class="b">flag</span><span class="f">;</span>
<a name="338"><span class="line">     338: </span></a>        <span class="k">/* Open-coded due to __stringify() in ALTERNATIVE() */</span>
<a name="339"><span class="line">     339: </span></a>        <span class="m">asm</span> <span class="m">volatile</span><span class="f">(</span><span class="e">&quot;1: movb $0,%0\n&quot;</span>
<a name="340"><span class="line">     340: </span></a>                 <span class="e">&quot;2:\n&quot;</span>
<a name="341"><span class="line">     341: </span></a>                 <span class="e">&quot;.section .altinstructions,\&quot;a\&quot;\n&quot;</span>
<a name="342"><span class="line">     342: </span></a>                 <a href="cpu.c_macros.html#_ASM_ALIGN_0"><span class="b">_ASM_ALIGN</span></a> <span class="e">&quot;\n&quot;</span>
<a name="343"><span class="line">     343: </span></a>                 <a href="cpu.c_macros.html#_ASM_PTR_0"><span class="b">_ASM_PTR</span></a> <span class="e">&quot;1b\n&quot;</span>
<a name="344"><span class="line">     344: </span></a>                 <a href="cpu.c_macros.html#_ASM_PTR_0"><span class="b">_ASM_PTR</span></a> <span class="e">&quot;3f\n&quot;</span>
<a name="345"><span class="line">     345: </span></a>                 <span class="e">&quot; .word %P1\n&quot;</span>        <span class="k">/* feature bit */</span>
<a name="346"><span class="line">     346: </span></a>                 <span class="e">&quot; .byte 2b - 1b\n&quot;</span>        <span class="k">/* source len */</span>
<a name="347"><span class="line">     347: </span></a>                 <span class="e">&quot; .byte 4f - 3f\n&quot;</span>        <span class="k">/* replacement len */</span>
<a name="348"><span class="line">     348: </span></a>                 <span class="e">&quot;.previous\n&quot;</span>
<a name="349"><span class="line">     349: </span></a>                 <span class="e">&quot;.section .discard,\&quot;aw\&quot;,@progbits\n&quot;</span>
<a name="350"><span class="line">     350: </span></a>                 <span class="e">&quot; .byte 0xff + (4f-3f) - (2b-1b)\n&quot;</span> <span class="k">/* size check */</span>
<a name="351"><span class="line">     351: </span></a>                 <span class="e">&quot;.previous\n&quot;</span>
<a name="352"><span class="line">     352: </span></a>                 <span class="e">&quot;.section .altinstr_replacement,\&quot;ax\&quot;\n&quot;</span>
<a name="353"><span class="line">     353: </span></a>                 <span class="e">&quot;3: movb $1,%0\n&quot;</span>
<a name="354"><span class="line">     354: </span></a>                 <span class="e">&quot;4:\n&quot;</span>
<a name="355"><span class="line">     355: </span></a>                 <span class="e">&quot;.previous\n&quot;</span>
<a name="356"><span class="line">     356: </span></a>                 <span class="f">:</span> <span class="e">&quot;=qm&quot;</span> <span class="f">(</span><span class="b">flag</span><span class="f">)</span> <span class="f">:</span> <span class="e">&quot;i&quot;</span> <span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">)</span><span class="f">;</span>
<a name="357"><span class="line">     357: </span></a>        <span class="m">return</span> <span class="b">flag</span><span class="f">;</span>
<a name="358"><span class="line">     358: </span></a><span class="f">#</span><span class="n">endif</span>
<a name="359"><span class="line">     359: </span></a><span class="f">}</span>
<a name="360"><span class="line">     360: </span></a>
<a name="361"><span class="line">     361: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#static_cpu_has(bit)_0"><span class="b">static_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span>                    \
<a name="362"><span class="line">     362: </span></a><span class="f">(</span>                                \
<a name="363"><span class="line">     363: </span></a>    <span class="b">__builtin_constant_p</span><span class="f">(</span><a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span><span class="f">)</span> <span class="f">?</span>        \
<a name="364"><span class="line">     364: </span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="f">:</span>                \
<a name="365"><span class="line">     365: </span></a>    <span class="b">__builtin_constant_p</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="f">?</span>                \
<a name="366"><span class="line">     366: </span></a>        <span class="b">__static_cpu_has</span><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <span class="f">:</span>                \
<a name="367"><span class="line">     367: </span></a>        <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span>                \
<a name="368"><span class="line">     368: </span></a><span class="f">)</span>
<a name="369"><span class="line">     369: </span></a><span class="f">#</span><span class="n">else</span>
<a name="370"><span class="line">     370: </span></a><span class="k">/*
<a name="371"><span class="line">     371: </span></a> * gcc 3.x is too stupid to do the static test; fall back to dynamic.
<a name="372"><span class="line">     372: </span></a> */</span>
<a name="373"><span class="line">     373: </span></a><span class="f">#</span><span class="n">define</span> <a href="cpu.c_macros.html#static_cpu_has(bit)_0"><span class="b">static_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span> <a href="cpu.c_macros.html#boot_cpu_has(bit)_0"><span class="b">boot_cpu_has</span></a><span class="f">(</span><span class="b">bit</span><span class="f">)</span>
<a name="374"><span class="line">     374: </span></a><span class="f">#</span><span class="n">endif</span>
<a name="375"><span class="line">     375: </span></a>
<a name="376"><span class="line">     376: </span></a><span class="f">#</span><span class="n">endif</span> <span class="k">/* defined(__KERNEL__) &amp;&amp; !defined(__ASSEMBLY__) */</span>
<a name="377"><span class="line">     377: </span></a>
<a name="378"><span class="line">     378: </span></a><span class="f">#</span><span class="n">endif</span> <span class="k">/* _ASM_X86_CPUFEATURE_H */</span>
<a name="379"><span class="line">     379: </span></a></pre>
  </body>
</html>
